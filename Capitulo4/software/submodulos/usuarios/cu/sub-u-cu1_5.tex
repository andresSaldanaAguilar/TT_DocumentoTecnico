\subsubsection{SUB-U-CU1.2-Ver Gráfica de Generación de Energía en Tiempo Real}\label{SUB-U-CU1.2}
La gráfica de generación en tiempo real es un componente de la interfaz de usuario \hyperref[fig:monitoreo]{[IU1-Generación Actual]} y se realizará haciendo una petición de los valores del día actual que el servidor tiene almacenados para graficarlos en la aplicación de usuario y posteriormente actualizar la gráfica de líneas por medio de peticiones al servidor en el tiempo establecido en la Regla de Negocios \ref{RN6}
\\ La comunicación se logrará mediante el patrón de intercambio de mensajes de la Regla de Negocios \ref{RN8} con el formato de datos establecido en la Regla de Negocios \ref{RN11}  

\begin{longtable}{|J{5cm}|J{10.3cm}|}
	\hline
	\textbf{Nombre del caso de uso} &
		SUB-U-CU1.2-Ver Gráfica de Generación en Tiempo Real \\ \hline
	\textbf{Objetivo} &
		Conseguir los valores de generación de energía del día actual para que la aplicación de usuario pueda construir una gráfica de líneas en tiempo real. \\ \hline
	\textbf{Actores} &
		\begin{itemize}
		    \item Usuario
			\item Servidor embebido
			\item Aplicación de Usuario
		\end{itemize} \\ \hline
	\textbf{Disparador} & 
	    El usuario inicia la aplicación de usuario, dando clic en el ícono correspondiente de la aplicación.\\ \hline 
	\textbf{Entradas} & 
		\begin{itemize}
				\item{[Servidor embebido]} Marca de tiempo.
				\item{[Aplicación de usuario]} Identificador de nodo sensor del que se desea conocer información.
		\end{itemize}\\ \hline 
	\textbf{Salidas} & 
		\begin{itemize}
			\item{[Servidor embebido]} Valor o valores de generación de energía previos a la marca de tiempo e incluyendo el ligado a la marca de tiempo.
		\end{itemize} \\ \hline
	\textbf{Precondiciones} &
		Debe estar establecida la conexión entre la Aplicación de usuario y el Servidor que atenderá las peticiones.
		\\ \hline
	\textbf{Postcondiciones} &
		Ninguna.\\ \hline
	\textbf{Condiciones de término} & 
		\begin{itemize}
			\item La aplicación de usuario recibe el valor o valores y construye la gráfica de líneas correspondiente.
		\end{itemize} \\ \hline 
	\textbf{Prioridad} & 
		Alta. \\ \hline
	\textbf{Errores} & 
		\begin{itemize}
		    \item \label{CUU1.2:Error1} Error 1: Sin conexión con el servidor.
			\item \label{CUU1.2:Error2} Error 2: La marca de tiempo requerida no existe en el servidor.
		    \item \label{CUU1.2:Error3} Error 3: Sin conexión con el cliente.
		    \item \label{CUU1.2:Error4} Error 4: El valor de generación es -1
		    \item \label{CUU1.2:Error5} Error 5: El valor de generación es 0
		\end{itemize} \\ \hline
	\textbf{Reglas de negocio} & 
		\begin{itemize}
		    \item \ref{RN6}
			\item \ref{RN8}
			\item \ref{RN11}
		\end{itemize} \\ \hline
\end{longtable}

\paragraph{Trayectoria principal}
    \label{SUB-U-CU1.2:TP}
	\begin{enumerate}
	    \item {[Usuario]} Inicia la aplicación de usuario dando clic en el ícono correspondiente a la aplicación y se selecciona por defecto el nodo sensor denominado como 1. \hyperref[SUB-U-CU1.2:TA]{[Trayectoria alternativa A]}
	    \item {[Aplicación de Usuario]} Envía la marca de tiempo actual. \hyperref[SUB-U-CU1.2:TB]{[Trayectoria alternativa B]} 
	    \item {[Servidor embebido]} Recibe la petición, busca los valores almacenados previos a la marca de tiempo, incluyendo el ligado a la marca de tiempo.
	    \item {[Servidor embebido]} Envía los valores correspondientes. \hyperref[SUB-U-CU1.2:TC]{[Trayectoria alternativa C]} 
	    \item {[Aplicación de Usuario]} Recibe los valores de monitoreo, muestra la pantalla \hyperref[fig:monitoreo]{[IU1-Generación Actual]} con los datos obtenidos. \hyperref[SUB-U-CU1.2:TD]{[Trayectoria alternativa D]}
	\end{enumerate}
	Fin del caso de uso.

\paragraph{Trayectoria alternativa A} \label{SUB-U-CU1.2:TA}
	El usuario ya está dentro de la aplicación de usuario e indica el nodo sensor del que desea conocer información.
	\begin{enumerate}[label=A\arabic*.]
		\item {[Aplicación de Usuario]} Transcurre el tiempo marcado por la Regla de Negocio \ref{RN6} y envía la marca de tiempo completa como petición al servidor, junto con el identificador del nodo sensor del que se desea conocer la información. \hyperref[SUB-U-CU1.2:TB]{[Trayectoria alternativa B]} 
		\item {[Servidor embebido]} Recibe la petición, busca los valores almacenados previos a la marca de tiempo, incluyendo el ligado a la marca de tiempo.
		\item  {[Servidor embebido]} Envía el valor correspondiente \hyperref[SUB-U-CU1.2:TC]{[Trayectoria alternativa C]}
        \item {[Aplicación de Usuario]} Recibe el valor de monitoreo, actualiza la pantalla \hyperref[fig:monitoreo]{[IU1-Generación Actual]} con el dato obtenido.
        \hyperref[SUB-U-CU1.2:TD]{[Trayectoria alternativa D]}.
	\end{enumerate}
	Fin de la trayectoria alternativa y fin del caso de uso.

\paragraph{Trayectoria alternativa B} \label{SUB-U-CU1.2:TB}
	Sin conexión con el servidor.
	\begin{enumerate}[label=B\arabic*.]
		\item {[Aplicación de usuario]} Muestra la pantalla emergente \hyperref[fig:Error de Conexion]{[PE1-Error de Conexión]}.
	\end{enumerate}
	Fin de la trayectoria alternativa y fin del caso de uso.


\paragraph{Trayectoria alternativa C} \label{SUB-U-CU1.2:TC}
	Sin conexión con el cliente.
	\begin{enumerate}[label=C\arabic*.]
		\item {[Servidor embebido]} Aborta envío y espera por la siguiente petición.
		\item {[Aplicación de usuario]} Al no recibir respuesta del servidor en ese intervalo, muestra la pantalla emergente \hyperref[fig:Error de Conexion]{[PE1-Error de Conexión]}.
	\end{enumerate}
	Fin de la trayectoria alternativa y fin del caso de uso.
	
	
\paragraph{Trayectoria alternativa D} \label{SUB-U-CU1.2:TD}
	El valor de generación es -1
	\begin{enumerate}[label=D\arabic*.]
		\item {[Aplicación de usuario]} Asigna como valor de generación 0 y actualiza la interfaz de usuario \hyperref[fig:monitoreo]{[IU1-Generación Actual]}.
	\end{enumerate}
	Fin de la trayectoria alternativa y fin de caso de uso.


