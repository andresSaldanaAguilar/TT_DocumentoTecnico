\subsubsection{SUB-M-CU1-Calcular promedio de energía sensada diariamente}\label{SUB-M-CU1}
La cantidad promedio de energía que es sensada diariamente es calculado tomando en cuenta las especificaciones de la Regla de Negocio \ref{RN5}, este cálculo se realiza diariamente cuando el periodo diario de toma de muestras especificado en la Regla de Negocio \ref{RN6} culmina.
% \begin{description}
% 	\item[Nombre del Caso de Uso] SUB-M-CU1-Calcular cantidad de combustible recargado.
% 	\item[Objetivo] Obtener las señales enviadas por el sensor y a partir de estas, calcular la cantidad de combustible que fue cargado al automóvil.
% 	\item[Actores] Sensor
% 	\item[Disparador] El microcontrolador detecta un cambio de voltaje en la salida del sensor y envía a través del módulo Bluetooth tramas indicando un pulso de voltaje en alta.
% 	\item[Entradas] \hfill
% 		\begin{itemize}
% 			\item Marca de tiempo de inicio de la recarga.
% 			\item Tramas enviadas por el módulo Bluetooth.
% 			\item Marca de tiempo de fin de la recarga.
% 		\end{itemize}
% 	\item[Salidas] \hfill 
% 		\begin{itemize}
% 			\item Cantidad de combustible recargado al automóvil.
% 			\item Fecha y hora en la que se registró la recarga de combustible.
% 		\end{itemize}
% 	\item[Precondiciones] Ninguna.
% 	\item[Postcondiciones] \hfill 
% 		\begin{itemize}
% 			\item El Cliente confirma la cantidad de combustible que le fue recargada.
% 			\item La medición calculada junto con la fecha y hora son almacenados.
% 		\end{itemize}
% 	\item[Condiciones de término] 
% 		\begin{itemize}
% 			\item Se obtiene un número flotante que representa la cantidad de combustible cargado al automóvil.
% 			\item Se obtiene la fecha y hora de la carga.
% 		\end{itemize}
% 	\item[Prioridad] Alta.
% 	\item[Errores] Ninguno.
% 	\item[Reglas de Negocio] \hfill
% 		\begin{itemize}
% 			\item \ref{RN1}.
% 			\item \ref{RN2}.
% 		\end{itemize}
% \end{description}

\begin{longtable}{|J{5cm}|J{10.3cm}|}
	\hline
	\textbf{Nombre del caso de uso} &
		SUB-M-CU1-Calcular promedio de energía sensada diariamente \\ \hline
	\textbf{Objetivo} &
		Obtener el promedio diario del total de muestras tomadas durante el día para su posterior almacenamiento. \\ \hline
	\textbf{Actores} &
		Servidor embebido \\ \hline 
	\textbf{Disparador} & 
		La última muestra del día fue tomada y el periodo de toma de muestras especificado en la Regla de Negocio \ref{RN6} ha culminado. \\ \hline 
	\textbf{Entradas} & 
		\begin{itemize}
				\item Muestras obtenidas del sistema fotovoltaico de acuerdo con la Regla de Negocio \ref{RN1} durante el día.
		\end{itemize}\\ \hline 
	\textbf{Salidas} & 
		\begin{itemize}
			\item Cantidad promedio de muestras sensadas diariamente por el sistema fotovoltaico.
			\item Fecha del día actual en la que se realizá el cálculo.
		\end{itemize} \\ \hline
	\textbf{Precondiciones} &
		Ninguna.\\ \hline
	\textbf{Postcondiciones} &
		\begin{itemize}
			\item El promedio calculado junto con la fecha del día en curso son almacenados.
		\end{itemize}\\ \hline
	\textbf{Condiciones de término} & 
		\begin{itemize}
			\item Se obtiene un número flotante que representa el promedio diario de energía que ha sido sensada.
			\item Se obtiene la fecha del día en curso del cual se realiza el promedio.
		\end{itemize} \\ \hline 
	\textbf{Prioridad} & 
		Alta. \\ \hline
	\textbf{Errores} & 
		\begin{itemize}
			\item \label{SUB-M-CU1:Error1} Error 1: No se puede establecer una conexión inalámbrica entre el módulo Bluetooth y el dispositivo móvil, termina el caso de uso.
		\end{itemize} \\ \hline
	\textbf{Reglas de negocio} & 
		\begin{itemize}
		    \item \ref{RN1}.
			\item \ref{RN4}.
			\item \ref{RN6}.
		\end{itemize} \\ \hline

	% \caption{}
	%\label{desc:SUB-M-CU1}
\end{longtable}

\paragraph{Trayectoria principal}
	\begin{enumerate}
		\item {[Sensor]} Detecta un cambio de voltaje en la salida del sensor y envía una trama indicando un pulso de voltaje en alta. \hyperref[SUB-M-CU1:Error1]{Error 1}
		\item {[Sistema]} Recibe la trama e inicializa el contador de impulsos en cero.
		\item \label{SUB-M-CU1:MarcaInicio} {[Sistema]} Crea una marca de tiempo de inicio de la recarga de combustible.
		\item \label{SUB-M-CU1:IncrementaContador} {[Sistema]} Incrementa el contador de impulsos en uno.
		\item {[Sistema]} Verifica que no se reciban más tramas durante más de un segundo, con base en la regla de negocio \ref{RN2}.\hyperref[SUB-M-CU1:TA]{[Trayectoria Alternativa A]}
		\item {[Sistema]} Crea una marca de tiempo indicando el fin de la carga de combustible.
		\item {[Sistema]} Calcula la cantidad de combustible cargado con base en la regla de negocio \ref{RN1}.
		\item {[Sistema]} Obtiene la fecha y hora actuales.
		\item {[Sistema]} Incluye el caso de uso \hyperref[SUB-M-CU1.1]{SUB-M-CU1.1-Confirmar medición}.
	\end{enumerate}
	Fin del caso de uso.

\paragraph{Trayectoria alternativa A} \label{SUB-M-CU1:TA}
	Se reciben al menos una trama antes de los cinco segundos.
	\begin{enumerate}[label=A\arabic*.]
		\item {[Sistema]} Continúa en el paso \ref{SUB-M-CU1:IncrementaContador} de la Trayectoria Principal.
	\end{enumerate}
	Fin de la trayectoria alternativa.
