%Dudas:
%   *Condición de término
%   *Trayectoria Principal
%   *Checar los errores
\subsubsection{SUB-M-CU1.4-Enviar muestras al Servidor embebido}\label{SUB-M-CU1.4}
El microcontrolador DSPIC30F4013 envía las muestras obtenidas del Sistema fotovoltaico a través del módulo WiFi como se especifica en la \ref{RN2} al Servidor embebido.
\begin{longtable}{|J{5cm}|J{10.3cm}|}
	\hline
	\textbf{Nombre del caso de uso} &
		SUB-M-CU1.4-Enviar muestras al Servidor embebido \\ \hline
	\textbf{Objetivo} &
		Enviar las muestras obtenidas por el microcontrolador al Servidor embebido para su posterior procesamiento. \\ \hline
	\textbf{Actores} &
	    \begin{itemize}
		    \item Microcontrolador
		    \item Servidor embebido
		\end{itemize}\\ \hline 
	\textbf{Disparador} & 
		El periodo de toma de muestras especificado en la \ref{RN6} no ha culminado.\\ \hline 
	\textbf{Entradas} & %Ninguna
		\begin{itemize}
				\item Muestra obtenida del Sistema fotovoltaico
		\end{itemize}
		\\ \hline 
	\textbf{Salidas} & 
	    \begin{itemize}
	        \item Trama UART.
	    \end{itemize}\\ \hline
	\textbf{Precondiciones} & 
		\begin{itemize}
		    \item El microcontrolador obtiene una medición del sensor por medio de IIC.
		    \item El periodo de toma de muestras especificado en la \ref{RN6} no ha culminado.
		\end{itemize}\\ \hline
	\textbf{Postcondiciones} &
		\begin{itemize}
			\item La información de la muestra es recibida por el Servidor embebido.
		\end{itemize} \\ \hline
	\textbf{Condiciones de término} & 
		\begin{itemize}
		    \item El Servidor embebido envía trama de acuse de recibo al módulo WiFi del microcontrolador.
		\end{itemize} 
		\\ \hline 
	\textbf{Prioridad} & 
		Alta. \\ \hline
	\textbf{Errores} &
		 \begin{itemize}
		 	\item \label{SUB-M-CU1.4:Error1} Error 1: El servidor envía una trama de no acuse de recibo al módulo WiFi.
		 	%\item \label{SUB-M-CU1.3:Error2} Error 2: La trama de respuesta de lectura de medición del sensor no fue recibida por el microcontrolador en el tiempo establecido.
		 	%\item \label{SUB-M-CU1.3:Error3} Error 3: El checksum de la trama de respuesta de lectura de medición del sensor no es válido.
		 \end{itemize} \\ 
		 \hline
	\textbf{Reglas de negocio} & 
	    \begin{itemize}
	      \item  \ref{RN2}
	      \item  \ref{RN6}
		 \end{itemize}%\\ \hline
		 \hline
	% \caption{}
	%\label{desc:SUB-M-CU1}
\end{longtable}

\paragraph{Trayectoria principal}
\label{SUB-M-CU1.4:TP}
	\begin{enumerate}
	    \item {[Microcontrolador]} Envía la muestra de medición por medio de la interfaz UART al módulo WiFi del microcontrolador.
	    \item {[Módulo WiFi Microcontrolador]} Recibe la muestra de medición por medio de la interfaz UART.
	    \item {[Módulo WiFi Microcontrolador]} Envía la trama con la información de la muestra a través del protocolo TCP al módulo WiFi del Servidor embebido.
	    \item {[Módulo WiFi Servidor Embebido]} Recibe la trama con la información de la muestra a través del protocolo TCP.\hyperref[SUB-M-CU1.4:TA]{[Trayectoria Alternativa A]}
	    \item {[Módulo WiFi Servidor embebido]} Valida que la trama sea correcta. 
	    \item {[Módulo WiFi Servidor embebido]} Envía trama de acuse de recibo al módulo WiFi del microcontrolador por medio del protocolo TCP. \hyperref[SUB-M-CU1.4:TB]{[Trayectoria Alternativa B]}
	    \item {[Módulo WiFi Microcontrolador]} Recibe trama de acuse de recibo del módulo WiFi del Servidor embebido.
	    %?
	\end{enumerate}
	Fin del caso de uso.


\paragraph{Trayectoria alternativa A} \label{SUB-M-CU1.4:TA}
	El módulo WiFi del Servidor Embebido no recibe la trama por lo que no envía acuse de recibo al módulo WiFi del microcontrolador
	\begin{enumerate}[label=A\arabic*.]
		\item {[Módulo WiFi Microcontrolador]} Reenvía la trama con la información de la muestra a través del protocolo TCP al módulo WiFi del Servidor embebido.
		\item {[Módulo WiFi Servidor Embebido]} Continúa en el paso 4 de la \hyperref[SUB-M-CU1.4:TP]{[Trayectoria Principal]}
	\end{enumerate}
	Fin de la trayectoria alternativa.

\paragraph{Trayectoria alternativa B} \label{SUB-M-CU1.4:TB}
	El Módulo WiFi del Servidor embebido envía trama de no acuse de recibo al módulo WiFi del microcontrolador.
	\begin{enumerate}[label=B\arabic*.]
		\item {[Módulo WiFi Servidor embebido]} Envía trama de no acuse de recibo al módulo WiFi del microcontrolador por medio del protocolo TCP.
		\item {[Módulo WiFi Microcontrolador]} Recibe trama de no acuse de recibo del módulo WiFi del Servidor embebido.
		\item {[Módulo WiFi Microcontrolador]} Reenvía la trama con la información de la muestra a través del protocolo TCP al módulo WiFi del Servidor embebido.
		\item {[Módulo WiFi Servidor Embebido]} Continúa en el paso 4 de la \hyperref[SUB-M-CU1.4:TP]{[Trayectoria Principal]}
	\end{enumerate}
	Fin de la trayectoria alternativa.