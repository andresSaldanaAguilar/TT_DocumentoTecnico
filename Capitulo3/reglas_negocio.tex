\section{Reglas de negocio}
En la presente sección, se muestran las reglas de negocio del sistema.
\begin{enumerate}[label=RN\arabic*.]
    \item \label{RN1}
		\begin{description}
			\item[Nombre] RN1-Obtención de muestras del sistema fotovoltaico en tiempo real.
			\item[Tipo] Regla de operación.
			\item[Objetivo] La obtención de mediciones del sistema fotovoltaico se realizará en tiempo real.
			\item[Descripción] La obtención de mediciones del sistema fotovoltaico dependerá del dispositivo de monitoreo empleado, en este caso, se trata del MCP39F521, y está determinada por la frecuencia de reloj de IIC de 400 Khz.
    		\end{description}
    		
\item \label{RN2}
	\begin{description}
		\item[Nombre] RN2-Envío de muestras del sistema fotovoltaico en tiempo real.
		\item[Tipo] Regla de operación.
		\item[Objetivo] El envío de mediciones del microcontrolador por medio del módulo Wi-Fi se realizará en tiempo real.
		\item[Descripción] El envío de muestras del microcontrolador por medio del módulo Wi-Fi dependerá de la velocidad de transmisión UART entre el microcontrolador y el módulo, que es de 115200 baudios. Un baudio es el número de unidades de información transmitidas por segundo ,que dependiendo de la configuración puede estar entre los 9600 a 11520 Bytes/seg.
		\end{description}	
		
    \item \label{RN3}
		\begin{description}
			\item[Nombre] RN3-Creación de alertas cuando se detecta que el sistema fotovoltaico dejó de producir energía.
			\item[Tipo] Regla de estímulo y respuesta.
			\item[Objetivo] Crear alertas que le informen al usuario el momento exacto en que el sistema fotovoltaico ha dejado de producir energía.
			\item[Descripción] La alerta será creada y enviada como notificación al usuario de forma inmediata si y sólo si en el proceso de monitoreo se ha detectado que la medición de energía producida es de 0 volts.  
    		\end{description}
    		
\item \label{RN4}
		\begin{description}
			\item[Nombre] RN4-Calcular promedio de energía sensada historicamente.
			\item[Tipo] Derivadora.
			\item[Objetivo] Calcular el promedio del intervalo de tiempo requerido.
			\item[Descripción] El informe de históricos al usuario mediante la aplicación móvil puede ser el promedio de la energía sensada semanal, mensual o bimestralmente y se realizará el cálculo de este promedio con los siguientes periodos:
			\\ Semanalmente: 
			\begin{itemize}
				\item La media de los promedios diarios de la semana, es decir, siete promedios.
			\end{itemize}
			\\ Mensualmente: 
			\begin{itemize}
				\item La media de los promedios diarios de todo el mes.
			\end{itemize}
			\\ Bimestralmente: 
			\begin{itemize}
				\item La media de los promedios diarios en el periodo de tiempo comprendido del 1 de Enero al 28 o 29 de Febrero (dependiendo de si el año es bisiesto)
				\item La media de los promedios diarios en el periodo de tiempo comprendido del 1 de Marzo al 30 de Abril
				\item La media de los promedios diarios en el periodo de tiempo comprendido del 1 de Mayo al 30 de Junio
				\item La media de los promedios diarios en el periodo de tiempo comprendido del 1 de Julio al 31 de Agosto
				\item La media de los promedios diarios en el periodo de tiempo comprendido del 1 de Septiembre al 31 de Octubre
				\item La media de los promedios diarios en el periodo de tiempo comprendido del 1 de Noviembre al 31 de Diciembre
			\end{itemize}
		\end{description}

\item \label{RN5}
		\begin{description}
			\item[Nombre] RN5-Calcular promedio de energía sensada diariamente.
			\item[Tipo] Derivadora.
			\item[Objetivo] Calcular promedio de energía sensada diariamente
			\item[Descripción] La cantidad promedio de las 120 muestras tomadas diariamente como lo especifica la regla de negocio \ref{RN6}.
		\end{description}

\item \label{RN6}
		\begin{description}
			\item[Nombre] RN6-Periodo de toma de muestras para cálculo de promedio diario de energía sensada.
			\item[Tipo] Operacional.
			\item[Objetivo] Establecer el periodo de tiempo en el que las muestras para cálculo de promedio diario de energía sensada serán tomadas.
			\item[Descripción] Las muestras comenzarán a tomarse y serán almacenadas a partir de las 8:00 a.m. hasta las 6:00 p.m. cada 5 minutos.
		\end{description}
		
%Checar tipo
\item \label{RN7}
		\begin{description}
			\item[Nombre] RN7-Estándar de comunicación.
			\item[Tipo] Derivación.
			\item[Objetivo] Establecer el estándar de comunicación entre microcontrolador-servidor y servidor-aplicación de usuario.
			\item[Descripción] El estándar de comunicación es el IEEE 802.11 que proporciona la base para los productos con redes inalámbricas que hacen uso de la marca Wi-Fi.
		\end{description}
		
%Checar tipo		
\item \label{RN8}
		\begin{description}
			\item[Nombre] RN8-Patrón de intercambio de mensajes.
			\item[Tipo] Derivación.
			\item[Objetivo] Establecer el patrón de intercambio de información entre módulos.
			\item[Descripción] El patrón de intercambio de información a utilizar entre módulos será petición-respuesta.
		\end{description}
		
%Después definir los datos exactos? o en req técnicos		
\item \label{RN9}
		\begin{description}
			\item[Nombre] RN9-Almacenamiento de datos de monitoreo.
			\item[Tipo] Regla de operación.
			\item[Objetivo] Establecer el método de almacenamiento de la información.
			\item[Descripción] El almacenamiento en el servidor está limitado por la memoria externa con capacidad de N GB de espacio que le es agregada, por lo que usaremos una herramienta que trabaja con una cantidad de datos fija, definida en el momento de crear el archivo contenedor, y un puntero al elemento actual.
		\end{description}

%Preguntar request-reply si es RN8?

%Definí como tipo, preguntar si otra regla debemos poner el formato (bien conformado con un xsd)?
%Checar si será XML o JSON
\item \label{RN10}
		\begin{description}
			\item[Nombre] RN10-Formato de datos almacenados.
			\item[Tipo] Regla de restricción.
			\item[Objetivo] Definir el formato en que serán almacenados los datos sensados.
			\item[Descripción] El formato en que serán almacenados los datos sensados está definido por un archivo con extensión XML/JSON. 
		\end{description}
		
\item \label{RN11}
		\begin{description}
			\item[Nombre] RN11-Formato de datos de respuesta para la aplicación de usuario.
			\item[Tipo] Regla de operación.
			\item[Objetivo] Definir el formato de los datos en que se enviaran las respuestas a las peticiones del cliente.
			\item[Descripción] El formato de los datos que se darán como respuesta a la aplicación será en texto plano mediante una cadena o en un arreglo de cadenas.
		\end{description}
		
\item \label{RN12}
		\begin{description}
			\item[Nombre] RN12-Umbrales de generación
			\item[Tipo] Regla de operación.
			\item[Objetivo] Definir los umbrales de generación de energía de acuerdo a la generación en tiempo real y los intervalos definidos 
			\item[Descripción] Los umbrales se dividirán en todos los casos en tres, generación óptima, intermedia y baja.
			El criterio comparar sera el valor de generación obtenido contra el valor de generación esperado por un panel solar, que es de 250 Watts Hora, donde el porcentaje obtenido por la relación nos dirá los siguiente:
			\begin{itemize}
			    \item 80\% - 100\% Generación Óptima, representado con el color verde.
			    \item 50\% - 79\% Generación Intermedia, representado con el color amarillo.
			    \item 0\% - 49\% Generación Baja, representado con el color rojo.
			\end{itemize}
		\end{description}
	
\item \label{RN13}
		\begin{description}
			\item[Nombre] RN13-Número de registros de notificaciones.
			\item[Tipo] Regla de restricción.
			\item[Objetivo] Definir la cantidad máxima de registros de notificaciones a conservar en la aplicación móvil.
			\item[Descripción] El número máximo de registros de notificaciones que se permitirán conservar en la aplicación móvil tiene que ser menor o igual a 30 notificaciones. El criterio para conservar las notificaciones dependerá únicamente del tiempo de llegada, es decir, se conservarán las notificaciones más recientes.   
		\end{description}
		
\item \label{RN14}
		\begin{description}
			\item[Nombre] RN14-Formato de fecha de notificaciones.
			\item[Tipo] Regla de estructura.
			\item[Objetivo] Definir el formato de fecha de las notificaciones para la aplicación móvil.
			\item[Descripción] El formato de fecha en que serán almacenadas las notificaciones del sistema en la aplicación móvil es: dd/mm/aaaa.
			Donde:
			\begin{itemize}
		 		\item dd = Corresponde al número de día del mes.
		 		\item mm = Corresponde al número de mes del año.
		 		\item aaaa = Corresponde al año
		    \end{itemize}
		\end{description}
		
\item \label{RN15}
		\begin{description}
			\item[Nombre] RN15-Formato de hora de notificaciones.
			\item[Tipo] Regla de estructura.
			\item[Objetivo] Definir el formato de hora de las notificaciones para la aplicación móvil.
			\item[Descripción] El formato de hora en que serán almacenadas las notificaciones del sistema en la aplicación móvil es: hh:mm.
			Donde:
			\begin{itemize}
		 		\item hh = Corresponde a la hora del día en formato de 24 horas.
		 		\item mm = Corresponde al minuto de la hora.
		    \end{itemize}
		\end{description}
%Estipular cuantas muestras se tomaran por dia y bimestralmente y si se deshecharán,
%Tipo de archivo en el que se almacenarán los datos

\item \label{RN16}
		\begin{description}
			\item[Nombre] RN16-Formato de IP válido.
			\item[Tipo] Regla de estructura.
			\item[Objetivo] Definir el formato IP válido para poder hacer la conexión con el servidor.
			\item[Descripción] El formato de IP válido será N.N.N.N
			Donde:
			\begin{itemize}
		 		\item N = numero entero menor a 255 y mayor o igual a 0
		    \end{itemize}
		\end{description}
		
\item \label{RN17}
		\begin{description}
			\item[Nombre] RN17-Periodo de lectura y envío de muestras en microcontrolador.
			\item[Tipo] Operacional.
			\item[Objetivo] Definir el periodo de tiempo en el que el microcontrolador hará lectura de la medición hecha por el nodo sensor para su posterior envío al sistema embebido.
			\item[Descripción] La lectura de muestras al nodo sensor por parte del microcontrolador, se realizará cada segundo, inmediatamente se enviará la muestra al sistema embebido. 
		\end{description}


\end{enumerate}